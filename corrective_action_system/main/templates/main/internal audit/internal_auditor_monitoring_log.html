<!-- templates/main/internal_auditor_monitoring_log.html -->
{% extends 'main/internal audit/base.html' %}

{% block title %}Internal Auditor Monitoring Log{% endblock %}

{% block content %}

<style>
    /* Primary Button (Dark Red) */
    .btn-primary {
      background-color: #A33331 !important; /* Dark red */
      color: white !important;
      border: none !important;
      border-radius: 8px !important; /* Slightly less rounded for modern look */
      padding: 12px 24px !important; /* More balanced padding */
      font-weight: bold !important;
      font-size: 1rem !important; /* Ensure consistent font size */
      cursor: pointer !important;
      transition: background-color 0.3s ease, box-shadow 0.3s ease !important;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important; /* Add subtle shadow */
    }

    .btn-primary:hover {
      background-color: #A33331 !important; /* Slightly lighter red on hover */
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15) !important; /* Enhance shadow on hover */
      color:white;
    }

    .btn-primary:disabled {
      background-color: #d3d3d3 !important;
      color: #777 !important;
      cursor: not-allowed !important;
      box-shadow: none !important;
    }

    /* Secondary Button (Lighter Red) */
    .btn-secondary {
      background-color: #E6A5A4!important; /* Lighter red */
      color: #8E2524  !important; /* Darker red text */
      border: none !important;
      border-radius: 8px !important;
      padding: 8px 24px !important;
      font-weight: bold !important;
      font-size: 1rem !important;
      cursor: pointer !important;
      transition: background-color 0.3s ease, box-shadow 0.3s ease !important;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
    }

    .btn-secondary:hover {
      background-color: #E6A5A4 !important; /* Slightly darker on hover */
      color: white;
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15) !important;
    }

    .btn-secondary:disabled {
      background-color: #f0f0f0 !important;
      color: #777 !important;
      cursor: not-allowed !important;
      box-shadow: none !important;
    }

    /* Tertiary Button (Minimal Red) */
    .btn-tertiary {
      background-color: transparent !important; /* No background */
      color: #A33331 !important; /* Use primary red for text */
      border: none !important;
      text-decoration: none !important;
      cursor: pointer !important;
      padding: 10px 15px !important;
      font-weight: normal !important;
      font-size: 1rem !important;
      transition: color 0.3s ease, text-shadow 0.3s ease !important;
    }

    .btn-tertiary:hover {
      color: #7e1f1f !important; /* Slightly darker red on hover */
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1) !important; /* Add a soft text shadow */
    }

    .btn-tertiary:disabled {
      color: #ccc !important;
      cursor: not-allowed !important;
      text-shadow: none !important;
    }

    .bg-primary {
        background-color: #C74C4A!important; /* Replace with your desired color */
        color: white !important;
    }
</style>

<h1>Monitoring Log</h1>
<p style="margin-bottom: 50px;">This is the internal auditor monitoring log page.</p>

<div class="d-flex justify-content-between align-items-center mt-4 mb-4">
    <h3 class="fw-bold">Projects</h3>
    <a href="{% url 'add_project' %}" class="btn btn-primary d-flex align-items-center">
        <i class="bi bi-plus-lg me-2"></i>Add New Project
    </a>
</div>



<!-- Filter Tabs -->
<ul id="tabContainer" class="nav nav-pills mb-4">
    <li class="nav-item">
        <a class="nav-link active" href="#" data-filter="all">All (32)</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="#" data-filter="ongoing">Ongoing (14)</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="#" data-filter="cancelled">Cancelled (2)</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="#" data-filter="finished">Finished (14)</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="#" data-filter="postponed">Postponed (2)</a>
    </li>
</ul>


<!-- Search Bar -->
<div class="search-container">
    <input class="search-input" id="searchInput" placeholder="Search..." type="text" />
    <span class="input-group-text"><i class="fas fa-search"></i></span>
</div>


<!-- Project Table -->
<table class="table table-striped table-hover" id="projectsTable">
    <thead>
    <tr>
        <th>NON-CONFORMITIES</th>
        <th>Assignees</th>
        <th>CAMPUS</th>
        <th>START DATE</th>
        <th>DEADLINE</th>
        <th>TASK</th>
        <th>PROGRESS</th>
        <th>STATUS</th>
    </tr>
    </thead>
    <tbody>
    <tr data-status="finished">
        <td><a data-bs-target="#auditTask1Modal" data-bs-toggle="modal" href="#" style="color: #203040;">Incomplete
            Documentation of Processes</a></td>
        <td>
            <div class="avatar-group">
                <img alt="Assignee" src="https://via.placeholder.com/35">
                <img alt="Assignee" src="https://via.placeholder.com/35">
                <span class="badge bg-primary">+2</span>
            </div>
        </td>
        <td>BULAN</td>
        <td>Nov 17, 2020</td>
        <td>May 21, 2028</td>
        <td>287</td>
        <td>
            <div>145 / 145</div>
            <div class="progress">
                <div class="progress-bar bg-success" style="width: 100%;"></div>
            </div>
        </td>
        <td><span class="badge-status badge-completed">COMPLETED</span></td>
    </tr>

    <tr data-status="ongoing">
        <td><a data-bs-target="#auditTask2Modal" data-bs-toggle="modal" href="#" style="color: #203040;">Lack of
            Corrective Action for Student Complaints</a></td>
        <td>
            <div class="avatar-group">
                <img alt="Assignee" src="https://via.placeholder.com/35">
            </div>
        </td>
        <td>BULAN</td>
        <td>Mar 8, 2021</td>
        <td>Sep 15, 2022</td>
        <td>125</td>
        <td>
            <div>148 / 223</div>
            <div class="progress">
                <div class="progress-bar bg-warning" style="width: 66%;"></div>
            </div>
        </td>
        <td><span class="badge-status badge-inactive">INACTIVE</span></td>
    </tr>

    <tr data-status="ongoing">
        <td><a data-bs-target="#auditTask3Modal" data-bs-toggle="modal" href="#" style="color: #203040;">Non-Compliance
            with Health and Safety Regulations</a>
        </td>
        <td>
            <div class="avatar-group">
                <img alt="Assignee" src="https://via.placeholder.com/35">
                <img alt="Assignee" src="https://via.placeholder.com/35">
                <span class="badge bg-primary">R</span>
            </div>
        </td>
        <td>BULAN</td>
        <td>Nov 17, 2020</td>
        <td>Sep 23, 2026</td>
        <td>72</td>
        <td>
            <div>277 / 539</div>
            <div class="progress">
                <div class="progress-bar bg-info" style="width: 51%;"></div>
            </div>
        </td>
        <td><span class="badge-status badge-ongoing">ONGOING</span></td>
    </tr>

    <tr data-status="postponed">
        <td><a data-bs-target="#auditTask4Modal" data-bs-toggle="modal" href="#" style="color: #203040;">Inconsistent
            Teacher Training and Development Programs</a>
        </td>
        <td>
            <div class="avatar-group">
                <img alt="Assignee" src="https://via.placeholder.com/35">
                <img alt="Assignee" src="https://via.placeholder.com/35">
            </div>
        </td>
        <td>BULAN</td>
        <td>Jan 01, 2016</td>
        <td>Apr 04, 2022</td>
        <td>91</td>
        <td>
            <div>169 / 394</div>
            <div class="progress">
                <div class="progress-bar bg-danger" style="width: 43%;"></div>
            </div>
        </td>
        <td><span class="badge-status badge-critical">CRITICAL</span></td>
    </tr>
    </tbody>
</table>

<!-- View All -->
<div class="d-flex justify-content-between align-items-center mt-4">
    <div class="d-flex align-items-center">
        <span style="margin-right:15px;">1 to 4 Items of 4</span>
        <a class="nav-link view-all-link d-flex align-items-center" href="#">
            View all
        </a>
        <i class="fa fa-angle-right ms-1"></i>
    </div>

    <!-- Pagination -->
    <nav aria-label="Page navigation example" class="pagination-container">
        <ul class="pagination pagination-red">
            <li class="page-item">
                <a aria-label="Previous" class="page-link" href="#">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item">
                <a aria-label="Next" class="page-link" href="#">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>

<!-- Modal for Audit Task -->
<div aria-hidden="true" aria-labelledby="auditTask1ModalLabel" class="modal fade" id="auditTask1Modal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-lg-custom">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="auditTask1ModalLabel">AUDIT TASK: ASSESS PROCESS OWNER COMPLIANCE WITH
                    RFA</h2>
                <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- Left-side content -->
                    <div class="col-md-6">
                        <div class="left-content">
                            <h4 class="text-red"><strong>Audit Finding: Non-Compliance with RFA Form Process</strong>
                            </h4>
                            <a class="nav-link view-all-link d-flex align-items-center" href="{% url 'fm_qms_010_page_1' %}">
                                View RFA Form here..
                            </a>
                            <br>
                            <p class="text-red">(Evidence and Auditor’s Observations).</p>
                            <p>
                                <small class="text-muted">During the audit of the process owner’s Request for Action
                                    (RFA) form compliance, it was identified that the step-by-step process was not being
                                    fully adhered to in the following instances:
                                    <br><br>
                                    Evidence:
                                    <br><br>
                                    1. **Marketing Department:** RFA form submitted without completing Step 3 (Approval
                                    from Department Head).<br>
                                    2. **HR Department:** Steps 4 and 5 (Verification and Final Review) not documented,
                                    leading to delays in action.
                                </small>
                            </p>
                            <small class="text-muted">ISO Clause/Reference: <strong>(ISO Clause 7.5.2 - Control of
                                documented information)</strong></small> <br>
                            <small class="text-muted">Audit Category (Major/Minor): <strong>Major</strong></small> <br>

                            <p class="text-red" style="padding-top:20px;">Immediate Action Plan (Auditor's
                                Recommendation):</p>
                            <p>
                                <small class="text-muted">The process owners must review and adhere to the RFA form
                                    steps to ensure that no steps are skipped. Training on the proper use and compliance
                                    with the RFA process is recommended to avoid recurrence.</small>
                            </p>

                            <div class="container mt-4">
                                <h4>Audit Follow-Up Actions</h4>

                                <!-- Status Dropdown -->
                                <div class="mb-3">
                                    <h6>Status</h6>
                                    <select class="form-select">
                                        <option selected>Select Status</option>
                                        <option value="1">Pending</option>
                                        <option value="2">In Progress</option>
                                        <option value="3">Completed</option>
                                    </select>
                                </div>

                                <!-- Due Date Input -->
                                <div class="mb-3">
                                    <h6>Due Date</h6>
                                    <input class="form-control" placeholder="Select due date" type="date">
                                </div>

                                <!-- Reminder Time Input -->
                                <div class="mb-3">
                                    <h6>Reminder</h6>
                                    <input class="form-control" placeholder="Set reminder time" type="time">
                                </div>

                                <!-- Tags Input -->
                                <div class="mb-3">
                                    <h6>Tags</h6>
                                    <input class="form-control" placeholder="Enter tags, separated by commas"
                                           type="text">
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Right-side progress steps -->
                    <div class="col-md-6">
                        <!-- Step 1 -->
                        <div class="progress-step">
                            <h6 class="d-flex justify-content-between align-items-center">
                                <a aria-controls="auditStep1Content" aria-expanded="false" class="btn-link" data-bs-toggle="collapse" href="#auditStep1Content" role="button">
                                    Step 1: Review RFA Submission Process
                                </a>
                                <i class="bi bi-check-circle text-success" id="step1-check" style="display: none;"></i> <!-- Check Icon -->
                            </h6>
                            <div class="collapse" id="auditStep1Content">
                                <p class="text-muted">Verify if the process owner has followed all steps in the RFA form, including submission, approval, and verification processes.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep1"><i class="bi bi-paperclip"></i> Attach file</label>
                                    <input id="file-attachment-auditstep1" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Ensure that the process owner has submitted the RFA form with all steps completed as required.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Awaiting feedback on RFA form from Marketing Department.
                                    </div>
                                </div>

                                <div class="add-comment d-flex">
                                    <input placeholder="Add a comment..." type="text" class="form-control me-2">
                                    <button type="button" class="btn btn-outline-secondary">
                                        <i class="bi bi-send"></i> <!-- Send Icon -->
                                    </button>
                                </div>

                                <!-- Complete Step Button -->
                                <div class="mt-4">
                                    <button type="button" class="btn btn-primary complete-step-btn" data-step="1">Complete Step</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2 -->
                        <div class="progress-step">
                            <h6 class="d-flex justify-content-between align-items-center">
                                <a aria-controls="auditStep2Content" aria-expanded="false" class="btn-link" data-bs-toggle="collapse" href="#auditStep2Content" role="button">
                                    Step 2: Assess Corrective Actions
                                </a>
                                <i class="bi bi-check-circle text-success" id="step2-check" style="display: none;"></i> <!-- Check Icon -->
                            </h6>
                            <div class="collapse" id="auditStep2Content">
                                <p class="text-muted">Determine if corrective actions have been implemented by the process owner to address any non-compliance with the RFA form process.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep2"><i class="bi bi-paperclip"></i> Attach file</label>
                                    <input id="file-attachment-auditstep2" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Confirm that corrective actions to comply with the RFA form process have been successfully implemented.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Corrective actions have been proposed and are in review.
                                    </div>
                                </div>

                                <div class="add-comment d-flex">
                                    <input placeholder="Add a comment..." type="text" class="form-control me-2">
                                    <button type="button" class="btn btn-outline-secondary">
                                        <i class="bi bi-send"></i> <!-- Send Icon -->
                                    </button>
                                </div>

                                <!-- Complete Step Button -->
                                <div class="mt-4">
                                    <button type="button" class="btn btn-primary complete-step-btn" data-step="2">Complete Step</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3 -->
                        <div class="progress-step">
                            <h6 class="d-flex justify-content-between align-items-center">
                                <a aria-controls="auditStep3Content" aria-expanded="false" class="btn-link" data-bs-toggle="collapse" href="#auditStep3Content" role="button">
                                    Step 3: Review Final Documentation
                                </a>
                                <i class="bi bi-check-circle text-success" id="step3-check" style="display: none;"></i> <!-- Check Icon -->
                            </h6>
                            <div class="collapse" id="auditStep3Content">
                                <p class="text-muted">Review final RFA forms submitted after corrective actions to ensure compliance with all steps.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep3"><i class="bi bi-paperclip"></i> Attach file</label>
                                    <input id="file-attachment-auditstep3" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Confirm that the final RFA forms are fully compliant with all procedural steps.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Final RFA forms have been submitted for audit review.
                                    </div>
                                </div>

                                <div class="add-comment d-flex">
                                    <input placeholder="Add a comment..." type="text" class="form-control me-2">
                                    <button type="button" class="btn btn-outline-secondary">
                                        <i class="bi bi-send"></i> <!-- Send Icon -->
                                    </button>
                                </div>

                                <!-- Complete Step Button -->
                                <div class="mt-4">
                                    <button type="button" class="btn btn-primary complete-step-btn" data-step="3">Complete Step</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4 -->
                        <div class="progress-step">
                            <h6 class="d-flex justify-content-between align-items-center">
                                <a aria-controls="auditStep4Content" aria-expanded="false" class="btn-link" data-bs-toggle="collapse" href="#auditStep4Content" role="button">
                                    Step 4: Management Review
                                </a>
                                <i class="bi bi-check-circle text-success" id="step4-check" style="display: none;"></i> <!-- Check Icon -->
                            </h6>
                            <div class="collapse" id="auditStep4Content">
                                <p class="text-muted">Ensure that management reviews and approves the final documentation and confirms compliance with the RFA form process.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep4"><i class="bi bi-paperclip"></i> Attach file</label>
                                    <input id="file-attachment-auditstep4" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Ensure that management has reviewed the compliance with RFA form processes and signed off.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Awaiting management approval for final documentation.
                                    </div>
                                </div>

                                <div class="add-comment d-flex">
                                    <input placeholder="Add a comment..." type="text" class="form-control me-2">
                                    <button type="button" class="btn btn-outline-secondary">
                                        <i class="bi bi-send"></i> <!-- Send Icon -->
                                    </button>
                                </div>

                                <!-- Complete Step Button -->
                                <div class="mt-4">
                                    <button type="button" class="btn btn-primary complete-step-btn" data-step="4">Complete Step</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 5 -->
                        <div class="progress-step">
                            <h6 class="d-flex justify-content-between align-items-center">
                                <a aria-controls="auditStep5Content" aria-expanded="false" class="btn-link" data-bs-toggle="collapse" href="#auditStep5Content" role="button">
                                    Step 5: Compliance Training
                                </a>
                                <i class="bi bi-check-circle text-success" id="step5-check" style="display: none;"></i> <!-- Check Icon -->
                            </h6>
                            <div class="collapse" id="auditStep5Content">
                                <p class="text-muted">Provide training to the process owners on the importance of following the step-by-step procedure as outlined in the RFA form.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep5"><i class="bi bi-paperclip"></i> Attach file</label>
                                    <input id="file-attachment-auditstep5" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Ensure that training on proper adherence to the RFA form process is scheduled and conducted for process owners.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Training for process owners is scheduled for next week.
                                    </div>
                                </div>

                                <div class="add-comment d-flex">
                                    <input placeholder="Add a comment..." type="text" class="form-control me-2">
                                    <button type="button" class="btn btn-outline-secondary">
                                        <i class="bi bi-send"></i> <!-- Send Icon -->
                                    </button>
                                </div>

                                <!-- Complete Step Button -->
                                <div class="mt-4">
                                    <button type="button" class="btn btn-primary complete-step-btn" data-step="5">Complete Step</button>
                                </div>
                            </div>
                        </div>

                        <!-- Step 6 -->
                        <div class="progress-step">
                            <h6 class="d-flex justify-content-between align-items-center">
                                <a aria-controls="auditStep6Content" aria-expanded="false" class="btn-link" data-bs-toggle="collapse" href="#auditStep6Content" role="button">
                                    Step 6: Final Compliance Audit
                                </a>
                                <i class="bi bi-check-circle text-success" id="step6-check" style="display: none;"></i> <!-- Check Icon -->
                            </h6>
                            <div class="collapse" id="auditStep6Content">
                                <p class="text-muted">Conduct a final compliance audit to verify that process owners are adhering to the RFA form and following all steps as required.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep6"><i class="bi bi-paperclip"></i> Attach file</label>
                                    <input id="file-attachment-auditstep6" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Schedule a follow-up audit to verify compliance with the RFA form process across all departments.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Awaiting the scheduling of the final audit.
                                    </div>
                                </div>

                                <div class="add-comment d-flex">
                                    <input placeholder="Add a comment..." type="text" class="form-control me-2">
                                    <button type="button" class="btn btn-outline-secondary">
                                        <i class="bi bi-send"></i> <!-- Send Icon -->
                                    </button>
                                </div>

                                <!-- Complete Step Button -->
                                <div class="mt-4">
                                    <button type="button" class="btn btn-primary complete-step-btn" data-step="6">Complete Step</button>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Lack of Corrective Action for Student Complaints -->
<div aria-hidden="true" aria-labelledby="auditTask2ModalLabel" class="modal fade" id="auditTask2Modal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-lg-custom">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="auditTask2ModalLabel">AUDIT TASK: Lack of Corrective Action for Student
                    Complaints</h2>
                <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- Left-side content -->
                    <div class="col-md-6">
                        <div class="left-content">
                            <h4 class="text-red"><strong>Audit Finding: Lack of Corrective Action for Student
                                Complaints</strong></h4> <br>

                            <p class="text-red">(Evidence and Auditor’s Observations).</p>
                            <p>
                                <small class="text-muted">During the audit, it was identified that corrective actions
                                    for student complaints were not documented or implemented in a timely manner.
                                    <br><br>
                                    Evidence:
                                    <br><br>
                                    1. **Student Affairs Office:** No corrective actions were recorded for several
                                    student complaints submitted between January and March.<br>
                                    2. **Support Services:** Delays in addressing complaints from students regarding
                                    campus facilities.
                                </small>
                            </p>
                            <small class="text-muted">ISO Clause/Reference: <strong>(ISO Clause 7.2 - Customer
                                Satisfaction and Complaints Handling)</strong></small> <br>
                            <small class="text-muted">Audit Category (Major/Minor): <strong>Major</strong></small> <br>

                            <p> class="text-red" style="padding-top:20px;">Immediate Action Plan (Auditor's
                                Recommendation):</p>
                            <p>
                                <small class="text-muted">The relevant departments must establish a formal corrective
                                    action plan to address and resolve student complaints in a timely manner. Training
                                    and clear documentation procedures are recommended to improve response times and
                                    accountability.</small>
                            </p>

                            <div class="container mt-4">
                                <h4>Audit Follow-Up Actions</h4>

                                <!-- Status Dropdown -->
                                <div class="mb-3">
                                    <h6>Status</h6>
                                    <select class="form-select">
                                        <option selected>Select Status</option>
                                        <option value="1">Pending</option>
                                        <option value="2">In Progress</option>
                                        <option value="3">Completed</option>
                                    </select>
                                </div>

                                <!-- Due Date Input -->
                                <div class="mb-3">
                                    <h6>Due Date</h6>
                                    <input class="form-control" placeholder="Select due date" type="date">
                                </div>

                                <!-- Reminder Time Input -->
                                <div class="mb-3">
                                    <h6>Reminder</h6>
                                    <input class="form-control" placeholder="Set reminder time" type="time">
                                </div>

                                <!-- Tags Input -->
                                <div class="mb-3">
                                    <h6>Tags</h6>
                                    <input class="form-control" placeholder="Enter tags, separated by commas"
                                           type="text">
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Right-side progress steps -->
                    <div class="col-md-6">
                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep1Content2" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep1Content2" role="button">
                                    Step 1: Review Complaint Submission Process
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep1Content2">
                                <p class="text-muted">Verify if student complaints were submitted following the required
                                    process and if they were properly documented and tracked for corrective actions.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep1-2"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep1-2" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Ensure that all student complaints have been recorded
                                        and that follow-up actions were taken.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Awaiting submission of complaint logs from
                                        Student Affairs.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep2Content2" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep2Content2" role="button">
                                    Step 2: Corrective Action Implementation
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep2Content2">
                                <p class="text-muted">Assess whether corrective actions have been implemented and
                                    tracked to address the submitted complaints.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep2-2"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep2-2" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Confirm corrective actions for each complaint and
                                        assess their timeliness.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Corrective actions for complaints are under
                                        review.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep3Content2" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep3Content2" role="button">
                                    Step 3: Final Documentation and Reporting
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep3Content2">
                                <p class="text-muted">Ensure all complaints and their corrective actions have been
                                    properly documented and reported to the management.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep3-2"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep3-2" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Verify that the final documentation reflects the
                                        closure of complaints with corrective actions.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Final corrective action reports have been
                                        submitted for review.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Non-Compliance with Health and Safety Regulations -->
<div aria-hidden="true" aria-labelledby="auditTask3ModalLabel" class="modal fade" id="auditTask3Modal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-lg-custom">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="auditTask3ModalLabel">AUDIT TASK: Non-Compliance with Health and Safety
                    Regulations</h2>
                <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- Left-side content -->
                    <div class="col-md-6">
                        <div class="left-content">
                            <h4 class="text-red"><strong>Audit Finding: Non-Compliance with Health and Safety
                                Regulations</strong></h4> <br>

                            <p class="text-red">(Evidence and Auditor’s Observations).</p>
                            <p>
                                <small class="text-muted">During the health and safety audit, several instances of
                                    non-compliance were identified in various departments. <br><br>
                                    Evidence:
                                    <br><br>
                                    1. **Maintenance Department:** Missing safety equipment during high-risk maintenance
                                    operations.<br>
                                    2. **Cafeteria:** Food handling staff not wearing appropriate protective gear,
                                    violating safety protocols.
                                </small>
                            </p>
                            <small class="text-muted">ISO Clause/Reference: <strong>(ISO Clause 8.2 - Health and Safety
                                Compliance)</strong></small> <br>
                            <small class="text-muted">Audit Category (Major/Minor): <strong>Major</strong></small> <br>

                            <p class="text-red" style="padding-top:20px;">Immediate Action Plan (Auditor's
                                Recommendation):</p>
                            <p>
                                <small class="text-muted">It is recommended that the departments adhere to the health
                                    and safety protocols by implementing immediate corrective actions such as staff
                                    training, ensuring the use of required safety gear, and regular safety
                                    audits.</small>
                            </p>

                            <div class="container mt-4">
                                <h4>Audit Follow-Up Actions</h4>

                                <!-- Status Dropdown -->
                                <div class="mb-3">
                                    <h6>Status</h6>
                                    <select class="form-select">
                                        <option selected>Select Status</option>
                                        <option value="1">Pending</option>
                                        <option value="2">In Progress</option>
                                        <option value="3">Completed</option>
                                    </select>
                                </div>

                                <!-- Due Date Input -->
                                <div class="mb-3">
                                    <h6>Due Date</h6>
                                    <input class="form-control" placeholder="Select due date" type="date">
                                </div>

                                <!-- Reminder Time Input -->
                                <div class="mb-3">
                                    <h6>Reminder</h6>
                                    <input class="form-control" placeholder="Set reminder time" type="time">
                                </div>

                                <!-- Tags Input -->
                                <div class="mb-3">
                                    <h6>Tags</h6>
                                    <input class="form-control" placeholder="Enter tags, separated by commas"
                                           type="text">
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Right-side progress steps -->
                    <div class="col-md-6">
                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep1Content3" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep1Content3" role="button">
                                    Step 1: Identify Non-Compliance Issues
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep1Content3">
                                <p class="text-muted">Review the non-compliance incidents in each department and gather
                                    evidence for corrective action planning.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep1-3"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep1-3" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Document all instances of non-compliance and their
                                        impact on health and safety regulations.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Evidence of non-compliance has been submitted
                                        for review.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep2Content3" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep2Content3" role="button">
                                    Step 2: Implement Corrective Actions
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep2Content3">
                                <p class="text-muted">Implement corrective measures to address the non-compliance issues
                                    and ensure the safety of all employees.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep2-3"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep2-3" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Confirm that corrective actions have been initiated,
                                        such as staff training and providing appropriate safety gear.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Corrective actions are currently being
                                        implemented.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep3Content3" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep3Content3" role="button">
                                    Step 3: Conduct Safety Training
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep3Content3">
                                <p class="text-muted">Provide mandatory health and safety training to all staff to
                                    ensure compliance with safety regulations.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep3-3"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep3-3" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Ensure that all departments have participated in
                                        health and safety training.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Safety training is scheduled for next week.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep4Content3" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep4Content3" role="button">
                                    Step 4: Conduct Final Safety Audit
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep4Content3">
                                <p class="text-muted">Perform a follow-up audit to ensure that all corrective actions
                                    have been implemented and sustained.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep4-3"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep4-3" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Schedule a final safety audit to verify compliance
                                        with health and safety regulations.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Awaiting final safety audit.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Inconsistent Teacher Training and Development Programs -->
<div aria-hidden="true" aria-labelledby="auditTask4ModalLabel" class="modal fade" id="auditTask4Modal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-lg-custom">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="auditTask4ModalLabel">AUDIT TASK: Inconsistent Teacher Training and
                    Development Programs</h2>
                <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- Left-side content -->
                    <div class="col-md-6">
                        <div class="left-content">
                            <h4 class="text-red"><strong>Audit Finding: Inconsistent Teacher Training and Development
                                Programs</strong></h4> <br>

                            <p class="text-red">(Evidence and Auditor’s Observations).</p>
                            <p>
                                <small class="text-muted">During the audit, it was found that there were inconsistencies
                                    in the scheduling, content, and assessment of teacher training and development
                                    programs across various campuses. <br><br>
                                    Evidence:
                                    <br><br>
                                    1. **Training Programs:** Several campuses reported gaps in the planned development
                                    programs, with some not meeting the set standards.<br>
                                    2. **Teacher Feedback:** Lack of consistent feedback and assessments post-training,
                                    leading to ineffective development tracking.
                                </small>
                            </p>
                            <small class="text-muted">ISO Clause/Reference: <strong>(ISO Clause 7.2 -
                                Competence)</strong></small> <br>
                            <small class="text-muted">Audit Category (Major/Minor): <strong>Minor</strong></small> <br>

                            <p class="text-red" style="padding-top:20px;">Immediate Action Plan (Auditor's
                                Recommendation):</p>
                            <p>
                                <small class="text-muted">It is recommended that all campuses follow a unified approach
                                    for planning and executing teacher training programs, with proper documentation and
                                    feedback mechanisms in place. Regular audits of the training schedules and outcomes
                                    are necessary to ensure consistency and effectiveness.</small>
                            </p>

                            <div class="container mt-4">
                                <h4>Audit Follow-Up Actions</h4>

                                <!-- Status Dropdown -->
                                <div class="mb-3">
                                    <h6>Status</h6>
                                    <select class="form-select">
                                        <option selected>Select Status</option>
                                        <option value="1">Pending</option>
                                        <option value="2">In Progress</option>
                                        <option value="3">Completed</option>
                                    </select>
                                </div>

                                <!-- Due Date Input -->
                                <div class="mb-3">
                                    <h6>Due Date</h6>
                                    <input class="form-control" placeholder="Select due date" type="date">
                                </div>

                                <!-- Reminder Time Input -->
                                <div class="mb-3">
                                    <h6>Reminder</h6>
                                    <input class="form-control" placeholder="Set reminder time" type="time">
                                </div>

                                <!-- Tags Input -->
                                <div class="mb-3">
                                    <h6>Tags</h6>
                                    <input class="form-control" placeholder="Enter tags, separated by commas"
                                           type="text">
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Right-side progress steps -->
                    <div class="col-md-6">
                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep1Content4" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep1Content4" role="button">
                                    Step 1: Review Training Programs
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep1Content4">
                                <p class="text-muted">Review the inconsistencies in training programs across campuses
                                    and ensure that all campuses adhere to a unified development plan.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep1-4"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep1-4" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Ensure that all campuses are following the
                                        standardized training schedule and content.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Awaiting confirmation from campuses on the
                                        updated training schedule.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep2Content4" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep2Content4" role="button">
                                    Step 2: Track Feedback and Assessment
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep2Content4">
                                <p class="text-muted">Ensure that all training programs are assessed through feedback
                                    from participants and management to track effectiveness and development.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep2-4"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep2-4" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Confirm that feedback has been consistently gathered
                                        and assessed across campuses.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Feedback assessments are currently being
                                        compiled for review.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep3Content4" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep3Content4" role="button">
                                    Step 3: Monitor Training Effectiveness
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep3Content4">
                                <p class="text-muted">Follow up on the effectiveness of the training programs by
                                    assessing the post-training performance and development of teachers.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep3-4"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep3-4" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Verify whether the training programs have resulted in
                                        noticeable improvements in teacher development.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Monitoring of post-training teacher performance
                                        is underway.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                        <div class="progress-step">
                            <h6>
                                <a aria-controls="auditStep4Content4" aria-expanded="false" class="btn-link" data-bs-toggle="collapse"
                                   href="#auditStep4Content4" role="button">
                                    Step 4: Final Audit of Teacher Development Program
                                </a>
                            </h6>
                            <div class="collapse" id="auditStep4Content4">
                                <p class="text-muted">Conduct a final audit of the teacher development program to ensure
                                    consistency and adherence across all campuses.</p>

                                <div class="attachment-input">
                                    <label for="file-attachment-auditstep4-4"><i class="bi bi-paperclip"></i> Attach
                                        file</label>
                                    <input id="file-attachment-auditstep4-4" type="file">
                                </div>

                                <div class="comments-section">
                                    <div class="comment admin-comment">
                                        <strong>Auditor:</strong> Schedule the final audit to review the overall
                                        consistency and outcomes of the teacher development program.
                                    </div>
                                    <div class="comment user-comment">
                                        <strong>User (Auditee):</strong> Final review of the teacher development program
                                        is scheduled for next month.
                                    </div>
                                </div>

                                <div class="add-comment">
                                    <input placeholder="Add a comment..." type="text">
                                    <button type="button">Comment</button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    // Function to update the count in each tab
function updateTabCounts() {
    const statusCounts = {
        all: 0,
        ongoing: 0,
        cancelled: 0,
        finished: 0,
        postponed: 0
    };

    // Count the number of rows for each status
    document.querySelectorAll('#projectsTable tbody tr').forEach(function(row) {
        const status = row.getAttribute('data-status');
        statusCounts.all++;
        if (statusCounts[status] !== undefined) {
            statusCounts[status]++;
        }
    });

    // Update the text of each tab to reflect the current counts
    document.querySelector('[data-filter="all"]').textContent = `All (${statusCounts.all})`;
    document.querySelector('[data-filter="ongoing"]').textContent = `Ongoing (${statusCounts.ongoing})`;
    document.querySelector('[data-filter="cancelled"]').textContent = `Cancelled (${statusCounts.cancelled})`;
    document.querySelector('[data-filter="finished"]').textContent = `Finished (${statusCounts.finished})`;
    document.querySelector('[data-filter="postponed"]').textContent = `Postponed (${statusCounts.postponed})`;
}

// Call this function initially to set the counts on page load
updateTabCounts();

// Modify the filter logic to call the updateTabCounts function after filtering
document.querySelectorAll('#tabContainer .nav-link').forEach(function(tab) {
    tab.addEventListener('click', function(e) {
        e.preventDefault();

        // Remove active class from all tabs within #tabContainer
        document.querySelectorAll('#tabContainer .nav-link').forEach(function(nav) {
            nav.classList.remove('active');
        });

        // Add active class to the clicked tab
        tab.classList.add('active');

        // Get the filter type
        const filter = tab.getAttribute('data-filter');

        // Get all table rows
        const rows = document.querySelectorAll('#projectsTable tbody tr');

        // Show/Hide rows based on the filter
        rows.forEach(function(row) {
            const status = row.getAttribute('data-status');

            if (filter === 'all' || status === filter) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });

        // Update the counts after filtering
        updateTabCounts();
    });
});

// Modify the filterTable function to also update the counts after filtering
function filterTable() {
    const filter = document.querySelector('#tabContainer .nav-link.active').getAttribute('data-filter');
    const searchQuery = document.getElementById('searchInput').value.toLowerCase();
    const rows = document.querySelectorAll('#projectsTable tbody tr');

    rows.forEach(function(row) {
        const status = row.getAttribute('data-status');
        const rowText = row.textContent.toLowerCase();

        // Check if the row matches both the selected filter and search query
        const matchesFilter = (filter === 'all' || status === filter);
        const matchesSearch = rowText.includes(searchQuery);

        // Show the row if it matches both, otherwise hide it
        if (matchesFilter && matchesSearch) {
            row.style.display = '';
        } else {
            row.style.display = 'none';
        }
    });

    // Update the counts after filtering
    updateTabCounts();
}

// Attach event listener to search input, scoped to the monitoring log
document.getElementById('searchInput').addEventListener('input', function() {
    filterTable();
});


// Function to filter table rows based on selected tab
document.querySelectorAll('#tabContainer .nav-link').forEach(function(tab) {
    tab.addEventListener('click', function(e) {
        e.preventDefault();

        // Remove active class from all tabs within #tabContainer
        document.querySelectorAll('#tabContainer .nav-link').forEach(function(nav) {
            nav.classList.remove('active');
        });

        // Add active class to the clicked tab
        tab.classList.add('active');

        // Get the filter type
        const filter = tab.getAttribute('data-filter');

        // Get all table rows
        const rows = document.querySelectorAll('#projectsTable tbody tr');

        // Show/Hide rows based on the filter
        rows.forEach(function(row) {
            const status = row.getAttribute('data-status');

            if (filter === 'all' || status === filter) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    });
});

// Search input filter logic, scoped to the monitoring log
function filterTable() {
    const filter = document.querySelector('#tabContainer .nav-link.active').getAttribute('data-filter');
    const searchQuery = document.getElementById('searchInput').value.toLowerCase();
    const rows = document.querySelectorAll('#projectsTable tbody tr');

    rows.forEach(function(row) {
        const status = row.getAttribute('data-status');
        const rowText = row.textContent.toLowerCase();

        // Check if the row matches both the selected filter and search query
        const matchesFilter = (filter === 'all' || status === filter);
        const matchesSearch = rowText.includes(searchQuery);

        // Show the row if it matches both, otherwise hide it
        if (matchesFilter && matchesSearch) {
            row.style.display = '';
        } else {
            row.style.display = 'none';
        }
    });
}

// Attach event listener to search input, scoped to the monitoring log
document.getElementById('searchInput').addEventListener('input', function() {
    filterTable();
});


    document.querySelectorAll('.complete-step-btn').forEach(function(btn) {
    btn.addEventListener('click', function() {
        const stepNumber = btn.getAttribute('data-step');
        const checkIcon = document.getElementById(`step${stepNumber}-check`);

        // Display the check icon
        if (checkIcon) {
            checkIcon.style.display = 'inline-block';
        }

        // Optionally collapse the step
        const stepContent = document.getElementById(`auditStep${stepNumber}Content`);
        if (stepContent) {
            stepContent.classList.remove('show');  // This will collapse the step
        }
    });
});

    document.querySelectorAll('.complete-step-btn').forEach(function(btn) {
    btn.addEventListener('click', function() {
        const stepNumber = btn.getAttribute('data-step');
        const checkIcon = document.getElementById(`step${stepNumber}-check`);

        // Display the check icon
        if (checkIcon) {
            checkIcon.style.display = 'inline-block';
        }

        // Disable further interaction with this step
        const stepLink = document.querySelector(`[data-bs-toggle="collapse"][href="#auditStep${stepNumber}Content"]`);
        if (stepLink) {
            stepLink.classList.add('disabled');
            stepLink.style.pointerEvents = 'none';
            stepLink.style.color = '#6c757d'; // Optional: change color to indicate disabled state
        }

        // Optionally collapse the step
        const stepContent = document.getElementById(`auditStep${stepNumber}Content`);
        if (stepContent) {
            stepContent.classList.remove('show');  // This will collapse the step
        }
    });
});


</script>
<!-- JavaScript Libraries -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js'></script>


{% endblock %}
